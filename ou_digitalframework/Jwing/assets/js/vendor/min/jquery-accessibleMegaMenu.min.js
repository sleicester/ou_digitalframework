!function(e,t,s){"use strict";function a(t,s){this.element=t,this.settings=e.extend({},o,s),this._defaults=o,this._name=l,this.init()}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function n(t,s){var a,n,l,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(l=e("img[usemap=#"+n+"]")[0],!!l&&i(l)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||s:s)&&i(t)}var l="accessibleMegaMenu",o={uuidPrefix:"accessible-megamenu",menuClass:"accessible-megamenu",topNavItemClass:"accessible-megamenu-top-nav-item",panelClass:"accessible-megamenu-panel",panelGroupClass:"accessible-megamenu-panel-group",hoverClass:"hover",focusClass:"focus",openClass:"open",clickToOpen:!1},r={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,keyMap:{48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",190:"."}};a.prototype=function(){var i,n,o,u,c,f,d,p,h,m,b,g,C,x=0,v=1e3,y="",T="function"==typeof t.hasOwnProperty&&!!t.hasOwnProperty("ontouchstart");return i=function(t){return e(t).closest(":data(plugin_"+l+")").data("plugin_"+l)},n=function(t){t=e(t);var s=this.settings;t.attr("id")||t.attr("id",s.uuidPrefix+"-"+(new Date).getTime()+"-"+ ++x)},o=function(t,a){var i,n,l=e(t.target),o=this,u=this.settings,f=this.menu,d=l.closest("."+u.topNavItemClass),p=l.hasClass(u.panelClass)?l:l.closest("."+u.panelClass),h=0;if(e(".ou-logo").css("margin-top")&&"int-nav-meta-list"===u.menuClass&&(h=Math.abs(e(".ou-logo").css("margin-top").split("px")[0])+53),C.call(this,a),e("html").off("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu, pointerup.outside-accessible-megamenu",c),f.find("[aria-expanded]."+this.settings.panelClass).off("DOMAttrModified.accessible-megamenu"),a)if(d=f.find("."+u.topNavItemClass+" ."+u.openClass+":first").closest("."+u.topNavItemClass),d.is(t.relatedTarget)||d.has(t.relatedTarget).length>0)0===d.length&&f.css("margin-bottom","0px").find("[aria-expanded=true]").attr("aria-expanded","false").removeClass(u.openClass).filter("."+u.panelClass).attr("aria-hidden","true");else{if(("mouseout"===t.type||"focusout"===t.type)&&d.has(s.activeElement).length>0)return;d.find("[aria-expanded]").attr("aria-expanded","false").removeClass(u.openClass).filter("."+u.panelClass).attr("aria-hidden","true"),f.css("margin-bottom","0px"),("keydown"===t.type&&t.keyCode===r.ESCAPE||"DOMAttrModified"===t.type)&&(i=d.find(":tabbable:first"),setTimeout(function(){f.find("[aria-expanded]."+o.settings.panelClass).off("DOMAttrModified.accessible-megamenu"),i.focus(),o.justFocused=!1},99),f.css("margin-bottom","0px"))}else clearTimeout(o.focusTimeoutID),d.siblings().find("[aria-expanded]").attr("aria-expanded","false").removeClass(u.openClass).filter("."+u.panelClass).attr("aria-hidden","true"),d.find("[aria-expanded]").attr("aria-expanded","true").addClass(u.openClass).filter("."+u.panelClass).attr("aria-hidden","false"),n=d.find("[aria-expanded]").filter("."+u.panelClass).height(),n>0&&u.clickToOpen?f.css("margin-bottom",n+h+"px"):f.css("margin-bottom","0px"),"mouseover"===t.type&&l.is(":tabbable")&&1===d.length&&0===p.length&&f.has(s.activeElement).length>0&&(l.focus(),o.justFocused=!1),C.call(o)},u=function(t){var s=e(t.target),a=s.closest("."+this.settings.topNavItemClass),i=s.closest("."+this.settings.panelClass);1===a.length&&0===i.length&&1===a.find("."+this.settings.panelClass).length&&(s.hasClass(this.settings.openClass)?this.justFocused?(t.preventDefault(),t.stopPropagation(),this.justFocused=!1):T&&(t.preventDefault(),t.stopPropagation(),o.call(this,t,s.hasClass(this.settings.openClass))):(t.preventDefault(),t.stopPropagation(),o.call(this,t)))},c=function(t){0===this.menu.has(e(t.target)).length&&(t.preventDefault(),t.stopPropagation(),o.call(this,t,!0))},f=function(t){"aria-expanded"===t.originalEvent.attrName&&"false"===t.originalEvent.newValue&&e(t.target).hasClass(this.settings.openClass)&&(t.preventDefault(),t.stopPropagation(),o.call(this,t,!0))},d=function(t){clearTimeout(this.focusTimeoutID),e(t.target).addClass(this.settings.focusClass).on("click.accessible-megamenu",e.proxy(u,this)),this.justFocused=!0,this.panels.filter("."+this.settings.openClass).length&&o.call(this,t)},p=function(s){this.justFocused=!1;var a=this,i=e(s.target),n=i.closest("."+this.settings.topNavItemClass);i.removeClass(this.settings.focusClass).off("click.accessible-megamenu",u),a.focusTimeoutID=t.cvox?setTimeout(function(){t.cvox.Api.getCurrentNode(function(e){n.has(e).length?clearTimeout(a.focusTimeoutID):a.focusTimeoutID=setTimeout(function(e,t,s){o.call(e,t,s)},275,a,s,!0)})},25):setTimeout(function(){o.call(a,s,!0)},300)},h=function(s){var a,n,l,c,f,d,p=e(e(this).is(".hover:tabbable")?this:s.target),h=p.is(s.target)?this:i(p),m=h.settings,b=h.menu,g=h.topnavitems,C=p.closest("."+m.topNavItemClass),x=b.find(":tabbable"),T=p.hasClass(m.panelClass)?p:p.closest("."+m.panelClass),D=T.find("."+m.panelGroupClass),k=p.closest("."+m.panelGroupClass),E=s.keyCode||s.which,w=!1,I=r.keyMap[s.keyCode]||"",N=1===C.length&&0===T.length;switch(p.is(".hover:tabbable")&&e("html").off("keydown.accessible-megamenu"),E){case r.ESCAPE:o.call(h,s,!0);break;case r.DOWN:s.preventDefault(),N?(o.call(h,s),w=1===C.find("."+m.panelClass+" :tabbable:first").focus().length):w=1===x.filter(":gt("+x.index(p)+"):first").focus().length,!w&&t.opera&&"[object Opera]"===opera.toString()&&(s.ctrlKey||s.metaKey)&&(x=e(":tabbable"),l=x.index(p),w=1===e(":tabbable:gt("+e(":tabbable").index(p)+"):first").focus().length);break;case r.UP:s.preventDefault(),N&&p.hasClass(m.openClass)?(o.call(h,s,!0),a=g.filter(":lt("+g.index(C)+"):last"),a.children("."+m.panelClass).length&&(w=1===a.children().attr("aria-expanded","true").addClass(m.openClass).filter("."+m.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus())):N||(w=1===x.filter(":lt("+x.index(p)+"):last").focus().length),!w&&t.opera&&"[object Opera]"===opera.toString()&&(s.ctrlKey||s.metaKey)&&(x=e(":tabbable"),l=x.index(p),w=1===e(":tabbable:lt("+e(":tabbable").index(p)+"):first").focus().length);break;case r.RIGHT:s.preventDefault(),N?w=1===g.filter(":gt("+g.index(C)+"):first").find(":tabbable:first").focus().length:(D.length&&k.length&&(w=1===D.filter(":gt("+D.index(k)+"):first").find(":tabbable:first").focus().length),w||(w=1===C.find(":tabbable:first").focus().length));break;case r.LEFT:s.preventDefault(),N?w=1===g.filter(":lt("+g.index(C)+"):last").find(":tabbable:first").focus().length:(D.length&&k.length&&(w=1===D.filter(":lt("+D.index(k)+"):last").find(":tabbable:first").focus().length),w||(w=1===C.find(":tabbable:first").focus().length));break;case r.TAB:l=x.index(p),s.shiftKey&&N&&p.hasClass(m.openClass)?(o(s,!0),a=g.filter(":lt("+g.index(C)+"):last"),a.children("."+m.panelClass).length&&(w=a.children().attr("aria-expanded","true").addClass(m.openClass).filter("."+m.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus())):s.shiftKey&&l>0?w=1===x.filter(":lt("+l+"):last").focus().length:!s.shiftKey&&l<x.length-1?w=1===x.filter(":gt("+l+"):first").focus().length:t.opera&&"[object Opera]"===opera.toString()&&(x=e(":tabbable"),l=x.index(p),w=s.shiftKey?1===e(":tabbable:lt("+e(":tabbable").index(p)+"):last").focus().length:1===e(":tabbable:gt("+e(":tabbable").index(p)+"):first").focus().length),w&&s.preventDefault();break;case r.SPACE:N&&(s.preventDefault(),u.call(h,s));break;default:if(clearTimeout(this.keydownTimeoutID),y+=I!==y?I:"",0===y.length)return;for(this.keydownTimeoutID=setTimeout(function(){y=""},v),x=N&&!p.hasClass(m.openClass)?x.filter("."+m.topNavItemClass+" > :tabbable"):C.find(":tabbable"),s.shiftKey&&(x=e(x.get().reverse())),l=0;l<x.length;l++)if(c=x.eq(l),c.is(p)){n=1===y.length?l+1:l;break}for(d=new RegExp("^"+y.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),"i"),l=n;l<x.length;l++)if(c=x.eq(l),f=e.trim(c.text()),d.test(f)){w=!0,c.focus();break}if(!w)for(l=0;n>l;l++)if(c=x.eq(l),f=e.trim(c.text()),d.test(f)){c.focus();break}}h.justFocused=!1},m=function(){this.mouseTimeoutID=setTimeout(function(){clearTimeout(this.focusTimeoutID)},1)},b=function(t){clearTimeout(this.mouseTimeoutID),e(t.target).addClass(this.settings.hoverClass),o.call(this,t),e(t.target).is(":tabbable")&&e("html").on("keydown.accessible-megamenu",e.proxy(h,t.target))},g=function(t){var s=this;e(t.target).removeClass(s.settings.hoverClass),s.mouseTimeoutID=setTimeout(function(){o.call(s,t,!0)},250),e(t.target).is(":tabbable")&&e("html").off("keydown.accessible-megamenu")},C=function(t){var s=this.menu;t?(e("html").off("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu",c),s.find("[aria-expanded]."+this.settings.panelClass).off("DOMAttrModified.accessible-megamenu",f)):(e("html").on("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu",e.proxy(c,this)),s.find("[aria-expanded=true]."+this.settings.panelClass).on("DOMAttrModified.accessible-megamenu",e.proxy(f,this)))},{constructor:a,init:function(){var t=this,s=this.settings,a=(this.justFocused=!1,this.nav=e(this.element)),i=this.menu=a.children().first(),l=this.topnavitems=i.children();i.addClass(s.menuClass),l.each(function(a,i){var l,o;i=e(i),i.addClass(s.topNavItemClass),l=i.find(":tabbable:first"),o=i.children(":not(:tabbable):last"),n.call(t,l),o.length&&(n.call(t,o),l.attr({"aria-haspopup":!0,"aria-owns":o.attr("id"),"aria-controls":o.attr("id"),"aria-expanded":!1}),o.attr({role:"group","aria-expanded":!1,"aria-hidden":!0}).addClass(s.panelClass).not("[aria-labelledby]").attr("aria-labelledby",l.attr("id")))}),this.panels=i.find("."+s.panelClass),i.on("focusin.accessible-megamenu",":tabbable, :focusable, ."+s.panelClass,e.proxy(d,this)).on("focusout.accessible-megamenu",":tabbable, :focusable, ."+s.panelClass,e.proxy(p,this)).on("keydown.accessible-megamenu",e.proxy(h,this)).on("mouseover.accessible-megamenu",e.proxy(b,this)).on("mouseout.accessible-megamenu",e.proxy(g,this)).on("mousedown.accessible-megamenu",e.proxy(m,this)),T&&i.on("touchstart.accessible-megamenu",e.proxy(u,this)),s.clickToOpen&&i.off("mouseover.accessible-megamenu").off("mouseout.accessible-megamenu").off("mousedown.accessible-megamenu").on("click.accessible-megamenu",e.proxy(u,this)),i.find("hr").attr("role","separator")},getDefaults:function(){return this._defaults},getOption:function(e){return this.settings[e]},getAllOptions:function(){return this.settings},setOption:function(e,t,s){this.settings[e]=t,s&&this.init()}}}(),e.fn[l]=function(t){return this.each(function(){e.data(this,"plugin_"+l)||e.data(this,"plugin_"+l,new a(this,t))})},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(s){return!!e.data(s,t)}}):function(t,s,a){return!!e.data(t,a[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||s>=0)&&n(t,!a)}})}(jQuery,window,document);